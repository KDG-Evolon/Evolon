<h2>購入履歴</h2>

<p th:text="'orders size = ' + ${orders.size()}"></p>

<table>
  <thead>
    <tr>
      <th>商品名</th>
      <th>価格</th>
      <th>ステータス</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    <tr th:each="order : ${orders}">
      <td th:text="${order.item.name}"></td>
      <td th:text="${order.price}"></td>
      <td th:text="${order.orderStatus.label}"></td>

      <td>
        <!-- 到着確認 -->
        <form th:if="${order.orderStatus.name() == 'SHIPPED'}"
              th:action="@{/orders/{id}/deliver(id=${order.id})}"
              method="post">
          <button type="submit" class="button">到着確認</button>
        </form>

        <!-- 評価へ -->
        <a th:if="${order.orderStatus.name() == 'DELIVERED'}"
           th:href="@{/reviews/new/{id}(id=${order.id})}"
           class="button secondary">
          評価する
        </a>
      </td>
    </tr>
  </tbody>
</table>
